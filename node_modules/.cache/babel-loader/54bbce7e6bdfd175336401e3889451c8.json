{"ast":null,"code":"import _classCallCheck from \"/Users/waqasrehmani/work/info30005/info30005-leaf-cafeco-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/waqasrehmani/work/info30005/info30005-leaf-cafeco-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/waqasrehmani/work/info30005/info30005-leaf-cafeco-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/waqasrehmani/work/info30005/info30005-leaf-cafeco-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/waqasrehmani/work/info30005/info30005-leaf-cafeco-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/waqasrehmani/work/info30005/info30005-leaf-cafeco-app/src/screens/Profile.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from \"react-router-dom\";\nimport NavBar from \"../components/NavBar\";\nimport Footer from '../components/Footer';\nimport * as API from '../utils/api';\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this, props));\n    _this.rewardHelper = {\n      RewFD: {\n        description: \"Free Drink\",\n        points: 35\n      },\n      Rew10: {\n        description: \"10% Off\",\n        points: 50\n      },\n      Rew20: {\n        description: \"20% Off\",\n        points: 75\n      },\n      Rew25: {\n        description: \"25% Off\",\n        points: 100\n      },\n      Rew50: {\n        description: \"50% Off\",\n        points: 200\n      },\n      Rew75: {\n        description: \"75% Off\",\n        points: 350\n      },\n      RewFM: {\n        description: \"Free Meal\",\n        points: 500\n      },\n      Rew100: {\n        description: \"100% Off\",\n        points: 1000\n      }\n    };\n\n    _this.goToProfile = function () {};\n\n    _this.goToRestaurantProfile = function (restaurantID) {\n      _this.props.selectRestaurant(restaurantID);\n\n      _this.props.history.push('/restaurant/' + restaurantID);\n    };\n\n    _this.logOutUser = function () {\n      _this.props.logOutUser();\n    };\n\n    _this.updateData = function () {\n      var saved = [];\n      var history = [];\n\n      if (_this.props.user) {\n        saved = _this.props.user.savedRestaurants.map(function (item) {\n          console.log(_this.props.restaurants);\n\n          var found = _this.props.restaurants.find(function (resto) {\n            return resto.id === item;\n          });\n\n          console.log(found);\n          return found;\n        });\n        history = _this.props.user.rewardHistory.map(function (item) {\n          var string = item.split('-');\n          var date = new Date(parseInt(string[3]));\n          return {\n            description: _this.rewardHelper[string[1]].description,\n            points: _this.rewardHelper[string[1]].points,\n            date: \"\".concat(date.getDate(), \"/\").concat(date.getMonth(), \"/\").concat(date.getFullYear())\n          };\n        });\n\n        _this.setState({\n          savedRestaurants: saved,\n          rewardHistory: history\n        });\n      }\n    };\n\n    _this.state = {\n      savedRestaurants: [],\n      rewardHistory: []\n    };\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props !== nextProps) {\n        this.updateData();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.userLoggedIn) {\n        this.updateData();\n      } else {}\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          user = _this$props.user,\n          restaurants = _this$props.restaurants;\n      var _this$state = this.state,\n          rewardHistory = _this$state.rewardHistory,\n          savedRestaurants = _this$state.savedRestaurants;\n      console.log('profile state:', this.state);\n\n      if (this.props.userLoggedIn) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(NavBar, Object.assign({}, this.props, {\n          logOutUser: this.logOutUser,\n          userLoggedIn: this.props.userLoggedIn,\n          goToProfile: this.goToProfile,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: 'profile-container',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: 'profile-item1',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: 'profile-item1-heading',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \" Account \"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, \"Name:\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, user.fname, \" \", user.lname)), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"Username:\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, user.username)), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, \"Email:\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, user.email)), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, \"Password:\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \"*****\"))), React.createElement(\"div\", {\n          className: 'profile-item2',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, \"Credits\"), React.createElement(\"div\", {\n          className: \"profile-item2-points-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, user.points), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, \"available\")), React.createElement(\"div\", {\n          className: \"profile-item2-input-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, \"Redeem Code\"), React.createElement(\"input\", {\n          placeholder: \"Enter Credit Code\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, \"Verify\"))), React.createElement(\"div\", {\n          className: 'profile-item3',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, \"Saved Eateries\"), React.createElement(\"div\", {\n          className: 'profile-item3-list',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, savedRestaurants.map(function (item) {\n          return React.createElement(\"div\", {\n            className: 'profile-item3-list-item',\n            onClick: function onClick() {\n              return _this2.goToRestaurantProfile(item);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            alt: \"resto photo\",\n            src: item.photo,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }, item.name));\n        }))), React.createElement(\"div\", {\n          className: 'profile-item4',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, \"Reward History\"), React.createElement(\"div\", {\n          className: 'profile-item4-list',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, rewardHistory.map(function (item) {\n          return React.createElement(\"div\", {\n            className: 'profile-item4-list-item',\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 225\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"profile-item4-list-item-info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 226\n            },\n            __self: this\n          }, React.createElement(\"label\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 227\n            },\n            __self: this\n          }, item.date), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 228\n            },\n            __self: this\n          }, \"The Vegie Bar\"), React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229\n            },\n            __self: this\n          }, item.description)), React.createElement(\"div\", {\n            className: \"profile-item4-list-item-points\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231\n            },\n            __self: this\n          }, item.points));\n        }), React.createElement(\"div\", {\n          className: 'profile-item4-list-item',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"profile-item4-list-item-info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, \"2/3/19\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, \"The Vegie Bar\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, \"Free Drink\")), React.createElement(\"div\", {\n          className: \"profile-item4-list-item-points\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244\n          },\n          __self: this\n        }, \"15\"))))), React.createElement(Footer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"profile-not-signed-in\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262\n          },\n          __self: this\n        }, \"User not signed in\"), React.createElement(Link, {\n          className: 'navbar-button',\n          to: '/dashboard',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, \" Home \"));\n      }\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nexport default withRouter(Profile);","map":{"version":3,"sources":["/Users/waqasrehmani/work/info30005/info30005-leaf-cafeco-app/src/screens/Profile.js"],"names":["React","Component","Link","withRouter","NavBar","Footer","API","Profile","props","rewardHelper","RewFD","description","points","Rew10","Rew20","Rew25","Rew50","Rew75","RewFM","Rew100","goToProfile","goToRestaurantProfile","restaurantID","selectRestaurant","history","push","logOutUser","updateData","saved","user","savedRestaurants","map","item","console","log","restaurants","found","find","resto","id","rewardHistory","string","split","date","Date","parseInt","getDate","getMonth","getFullYear","setState","state","nextProps","userLoggedIn","fname","lname","username","email","photo","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport NavBar from \"../components/NavBar\";\nimport Footer from '../components/Footer'\n\nimport * as API from '../utils/api'\n\n\n\nclass Profile extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            savedRestaurants: [],\n            rewardHistory: [],\n        }\n    }\n\n    rewardHelper = {\n        RewFD: {\n            description: \"Free Drink\",\n            points: 35,\n        },\n        Rew10: {\n            description: \"10% Off\",\n            points: 50,\n        },\n        Rew20: {\n            description: \"20% Off\",\n            points: 75,\n        },\n        Rew25: {\n            description: \"25% Off\",\n            points: 100,\n        },\n        Rew50: {\n            description: \"50% Off\",\n            points: 200,\n        },\n        Rew75: {\n            description: \"75% Off\",\n            points: 350,\n        },\n        RewFM: {\n            description: \"Free Meal\",\n            points: 500,\n        },\n        Rew100: {\n            description: \"100% Off\",\n            points: 1000,\n        },\n    }\n\n    goToProfile = () => {}\n\n    goToRestaurantProfile = (restaurantID) => {\n        this.props.selectRestaurant(restaurantID)\n        this.props.history.push('/restaurant/' + restaurantID)\n    }\n\n    logOutUser = () => {\n        this.props.logOutUser()\n    }\n\n    updateData = () => {\n        let saved = []\n        let history = []\n\n\n\n        if (this.props.user) {\n\n            saved = this.props.user.savedRestaurants.map(item => {\n                console.log(this.props.restaurants)\n\n                let found = this.props.restaurants.find( resto => resto.id === item)\n                console.log(found)\n                return found\n            })\n\n\n            history = this.props.user.rewardHistory.map(item => {\n                let string = item.split('-')\n                let date = new Date(parseInt(string[3]))\n                return {\n                    description: this.rewardHelper[string[1]].description,\n                    points: this.rewardHelper[string[1]].points,\n                    date: `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`,\n                }\n            })\n\n            this.setState({\n                savedRestaurants: saved,\n                rewardHistory: history,\n            })\n        }\n\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props !== nextProps) {\n            this.updateData()\n        }\n    }\n\n    componentDidMount(){\n        if (this.props.userLoggedIn) {\n            this.updateData()\n        } else {\n\n        }\n    }\n\n\n    render () {\n\n        const { user, restaurants } = this.props\n        const { rewardHistory, savedRestaurants } = this.state\n        console.log('profile state:', this.state)\n\n        if (this.props.userLoggedIn) {\n            return (\n                <div>\n                    <NavBar\n                        {...this.props}\n                        logOutUser={this.logOutUser}\n                        userLoggedIn={this.props.userLoggedIn}\n                        goToProfile={this.goToProfile}\n                    />\n\n                    <div className={'profile-container'}>\n                        <div className={'profile-item1'}>\n                            <h2 className={'profile-item1-heading'}> Account </h2>\n\n                            <div >\n                                <label >Name:</label>\n                                <span>{user.fname} {user.lname}</span>\n\n                            </div>\n\n                            <div >\n                                <label>Username:</label>\n                                <span>{user.username}</span>\n\n                            </div>\n\n                            <div>\n                                <label>Email:</label>\n                                <span>{user.email}</span>\n\n                            </div>\n\n                            <div >\n                                <label>Password:</label>\n                                <span>*****</span>\n                            </div>\n\n                        </div>\n\n\n                        <div className={'profile-item2'}>\n                            <h2>\n                                Credits\n                            </h2>\n                            <div className='profile-item2-points-container'>\n                                <p >\n                                    {user.points}\n                                </p>\n                                <span >\n                                    available\n                                </span>\n\n                            </div>\n\n\n                            <div className='profile-item2-input-container'>\n                                <div>Redeem Code</div>\n                                <input placeholder='Enter Credit Code'/>\n                                <button >\n                                    Verify\n                                </button>\n                            </div>\n\n                        </div>\n\n\n                        <div className={'profile-item3'}>\n                            <h2>\n                                Saved Eateries\n                            </h2>\n\n                            <div className={'profile-item3-list'}>\n                                {\n                                    savedRestaurants.map(item =>\n\n                                        <div\n                                            className={'profile-item3-list-item'}\n                                            onClick={() => this.goToRestaurantProfile(item)}\n                                        >\n                                            <img alt='resto photo' src={item.photo}/>\n                                            <div>\n                                                {item.name}\n                                            </div>\n                                        </div>\n                                    )\n                                }\n\n                            </div>\n\n                        </div>\n\n                        <div className={'profile-item4'}>\n\n                            <h2>\n                                Reward History\n                            </h2>\n\n                            <div className={'profile-item4-list'}>\n\n                                {\n                                    rewardHistory.map(item =>\n                                        <div className={'profile-item4-list-item'}>\n                                            <div className='profile-item4-list-item-info'>\n                                                <label>{item.date}</label>\n                                                <div>The Vegie Bar</div>\n                                                <span>{item.description}</span>\n                                            </div>\n                                            <div className='profile-item4-list-item-points'>\n                                                {item.points}\n                                            </div>\n                                        </div>\n                                    )\n                                }\n\n                                <div className={'profile-item4-list-item'}>\n                                    <div className='profile-item4-list-item-info'>\n                                        <label>2/3/19</label>\n                                        <div>The Vegie Bar</div>\n                                        <span>Free Drink</span>\n                                    </div>\n                                    <div className='profile-item4-list-item-points'>\n                                        15\n                                    </div>\n                                </div>\n\n\n                            </div>\n\n\n                        </div>\n                    </div>\n\n                    <Footer />\n                </div>\n            )\n        } else {\n            return (\n                <div className='profile-not-signed-in'>\n                    <h1>\n                        User not signed in\n                    </h1>\n\n                    <Link\n                        className={'navbar-button'}\n                        to={'/dashboard'}\n                    > Home </Link>\n\n\n                </div>\n            )\n        }\n    }\n}\n\nexport default withRouter(Profile)"]},"metadata":{},"sourceType":"module"}